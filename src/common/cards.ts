import * as _ from 'lodash'

export enum CategoryTag {
  Simple = 'просто', Tricky = 'хитро', Athletics = 'сложно', OnlyShe = 'она', OnlyHe = 'он', SixNine = '69'
}

interface NewCategoryType {
  title: string
  name: string
  ids: { [key in CategoryTag]?: number[] }
}

export const newCategories: NewCategoryType[] = [
  {
    title: 'на кровати',
    name: 'bed',
    ids: {
      [CategoryTag.Simple]: [3, 6, 7, 9, 10, 17, 18, 19, 29, 30, 35, 38, 39, 44, 46, 49, 52, 56, 59, 60, 67, 71, 72, 73, 76, 77, 81, 82, 83, 84, 90, 94, 96, 110, 112, 114, 116, 118, 120, 121, 123, 133, 142, 143, 145, 147, 151, 153, 155, 156, 158, 159, 164, 170, 173, 175, 180, 184, 187, 191, 197, 198, 201, 206, 208, 210, 218, 220, 224, 227, 230, 239, 240, 242, 244, 252, 255, 262, 265, 268, 270, 275, 276, 279, 283, 284, 286, 287, 292, 296, 297, 300, 303, 306, 309, 310, 311, 313, 314, 319, 323, 326, 327, 329, 335, 336, 343, 345, 348, 350, 354, 356, 359, 360, 363, 365],
      [CategoryTag.Tricky]: [1, 16, 28, 33, 36, 40, 41, 48, 78, 85, 89, 91, 100, 105, 106, 108, 113, 125, 127, 134, 136, 141, 152, 174, 202, 205, 209, 211, 223, 235, 243, 245, 251, 259, 261, 266, 269, 281, 289, 295, 317, 324, 339, 341, 344, 346, 349, 353, 358, 364],
      [CategoryTag.Athletics]: [93, 103, 176, 181, 182, 204, 214, 226, 232, 249, 253, 256, 282, 285, 291, 312],
      [CategoryTag.OnlyShe]: [20, 51, 53, 68, 80, 99, 124, 149, 161, 169, 178, 188, 213, 231, 238, 248, 278, 302, 315, 320, 331, 340],
      [CategoryTag.OnlyHe]: [15, 25, 31, 34, 43, 74, 86, 95, 102, 107, 135, 138, 146, 163, 196, 247, 260,],
      [CategoryTag.SixNine]: [55, 63, 130, 144, 162, 195, 217, 274, 305, 308,],
    },
  },
  {
    title: 'на столе',
    name: 'table',
    ids: {
      [CategoryTag.Simple]: [5, 14, 58, 79, 87, 126, 131, 246, 250],
      [CategoryTag.Tricky]: [190],
      [CategoryTag.Athletics]: [23, 101, 104],
    },
  },
  {
    title: 'в кресле',
    name: 'chair',
    ids: {
      [CategoryTag.Simple]: [32, 126, 160, 185, 199, 207, 221, 237, 254, 258, 280, 298],
      [CategoryTag.Tricky]: [13, 26, 42, 47, 92, 115, 122, 132, 148, 192, 211, 228, 243, 318],
      [CategoryTag.Athletics]: [64, 66, 98, 111, 117, 129, 139, 179, 186, 215, 229, 233, 241, 273, 277, 290, 307, 321],
      [CategoryTag.OnlyShe]: [189, 325, 328,],
      [CategoryTag.OnlyHe]: [97,],
      [CategoryTag.SixNine]: [172, 219,]
    },
  },
  {
    title: 'на полу',
    name: 'floor',
    ids: {
      [CategoryTag.Simple]: [24, 57, 79, 87, 145, 165, 167, 177, 194, 203, 250, 280, 293, 316, 334,],
      [CategoryTag.Athletics]: [37, 45, 50, 54, 93, 109, 157, 183, 186, 193, 225, 233, 253, 272, 304, 321, 330, 361],
      [CategoryTag.OnlyHe]: [11, 299],
      [CategoryTag.OnlyShe]: [88, 128, 171, 200, 257, 342, 357,],
      [CategoryTag.SixNine]: [294,],
    }
  },
  {
    title: 'на пуфике',
    name: 'pouf',
    ids: {
      [CategoryTag.Simple]: [4, 62, 65, 70, 150, 160, 185, 236, 246, 267, 301, 333, 337, 347],
      [CategoryTag.Tricky]: [13, 26, 27, 92, 122, 190, 228],
      [CategoryTag.Athletics]: [2, 183, 264],
      [CategoryTag.OnlyHe]: [12, 22],
      [CategoryTag.OnlyShe]: [338,]
    }
  },
  {
    title: 'на мяче',
    name: 'fit-ball',
    ids: {
      [CategoryTag.Simple]: [21, 165, 216, 101, 137, 165, 322, 355, 362],
      [CategoryTag.Tricky]: [234],
      [CategoryTag.Athletics]: [61, 69, 75, 119, 166, 168, 216, 222, 263, 332, 351],
      [CategoryTag.OnlyShe]: [8, 271],
      [CategoryTag.OnlyHe]: [288,],
    }
  },
]

export const getCategoryIdsByName = (category: NewCategoryType, tag: CategoryTag): number[] => {
  return category.ids[tag]?.map(offsetCategoryIds) ?? []
}

const offsetCategoryIds = (id: number) => id + cardsOffset - 1

interface CategoryType {
  title: string
  ids: number[]
}

const categoriesByOriginIds = {
  simple: {
    title: 'Всё гениальное просто',
    ids: [
      3, 4, 5, 6, 7, 9, 10, 14, 17, 18, 19, 21, 24, 29, 30, 32, 35, 38, 39, 44, 46, 49, 52, 56, 57, 58, 59, 60, 62, 65,
      67, 70, 71, 72, 73, 76, 77, 79, 81, 82, 83, 84, 87, 90, 94, 96, 110, 112, 114, 116, 118, 120, 121, 123, 126, 131,
      133, 142, 143, 145, 147, 150, 151, 153, 155, 156, 158, 159, 160, 164, 165, 167, 170, 173, 175, 177, 180, 184, 185,
      187, 191, 194, 197, 198, 199, 201, 203, 206, 207, 208, 210, 216, 218, 220, 221, 224, 227, 230, 236, 237, 239,
      240, 242, 244, 246, 250, 252, 254, 255, 258, 262, 265, 267, 268, 270, 275, 276, 279, 280, 283, 284, 286, 287, 292,
      293, 296, 297, 298, 300, 301, 303, 306, 309, 310, 311, 313, 314, 316, 319, 323, 326, 327, 329, 333, 334, 335, 336,
      337, 343, 345, 347, 348, 350, 354, 356, 359, 360, 363, 365,
    ],
  },
  athletic: {
    title: 'Сила любви',
    ids: [
      2, 11, 23, 37, 45, 50, 54, 61, 64, 66, 69, 75, 93, 98, 101, 103, 104, 109, 111, 117, 119, 129, 137, 139, 157,
      166, 168, 176, 179, 181, 182, 183, 186, 193, 204, 214, 215, 222, 225, 226, 229, 232, 233, 234, 241, 249, 253,
      256, 263, 264, 272, 273, 277, 282, 285, 290, 291, 304, 307, 312, 321, 330, 361,
    ],
  },
  tricky: {
    title: 'Хитро-выдуманные',
    ids: [
      1, 13, 16, 26, 27, 28, 33, 36, 40, 41, 42, 47, 48, 78, 85, 89, 91, 92, 100, 105, 106, 108, 113, 115, 122, 125,
      127, 132, 134, 136, 141, 148, 152, 174, 190, 192, 202, 205, 209, 211, 223, 228, 235, 243, 245, 251, 259, 261,
      266, 269, 281, 289, 295, 317, 318, 324, 339, 341, 344, 346, 349, 353, 358, 364,
    ]
  },
  onlyWoman: {
    title: 'Она будет довольна',
    ids: [
      8, 20, 51, 53, 68, 80, 88, 99, 124, 128, 149, 161, 169, 171, 178, 188, 189, 200, 213, 231, 238, 248, 257, 271,
      278, 302, 315, 320, 325, 328, 331, 338, 340, 342, 357,
    ],
  },
  sheTop: {
    title: 'Её счастье сверху',
    ids: [
      1, 3, 6, 9, 17, 18, 27, 29, 32, 33, 36, 38, 40, 41, 48, 60, 61, 67, 70, 75, 81, 82, 89, 90, 94, 96, 98, 103, 108,
      111, 115, 117, 119, 120, 122, 123, 127, 129, 140, 142, 143, 150, 153, 158, 166, 175, 182, 190, 191, 199, 201,
      205, 206, 207, 208, 211, 214, 221, 224, 227, 230, 235, 237, 252, 254, 255, 258, 259, 262, 265, 269, 273, 277, 283,
      292, 295, 297, 298, 306, 309, 313, 318, 323, 326, 329, 333, 343, 345, 346, 347, 348, 350, 353, 364,
    ]
  },
  onlyMan: {
    title: 'Соблазни его',
    ids: [11, 12, 15, 25, 31, 34, 43, 74, 86, 95, 97, 102, 107, 135, 138, 146, 163, 196, 247, 260, 288, 299,],
  },
  heFromBack: {
    title: 'Вид с зади',
    ids: [
      2, 5, 13, 21, 24, 28, 37, 39, 45, 47, 52, 56, 57, 58, 59, 64, 65, 73, 76, 78, 83, 85, 87, 101, 105, 109, 114,
      116, 118, 121, 125, 126, 131, 132, 133, 134, 137, 139, 145, 147, 151, 155, 160, 165, 168, 170, 177, 179, 180, 184,
      185, 186, 193, 194, 198, 210, 211, 215, 218, 222, 226, 229, 236, 241, 243, 246, 250, 253, 254, 264, 270, 280, 284,
      286, 287, 293, 307, 316, 318, 324, 327, 334, 337,
    ],
  },
  heTop: {
    title: 'Лицом к лицу',
    ids: [
      4, 7, 10, 14, 16, 19, 23, 26, 30, 35, 42, 44, 46, 49, 50, 61, 66, 69, 71, 72, 77, 79, 84, 91, 93, 104, 106,
      110, 112, 113, 141, 152, 154, 156, 157, 159, 164, 167, 173, 176, 181, 183, 187, 192, 197, 199, 202, 203, 208,
      214, 216, 220, 225, 232, 233, 239, 240, 242, 244, 256, 261, 267, 268, 272, 276, 279, 282, 285, 290, 291, 296, 300,
      301, 304, 310, 311, 312, 313, 314, 335, 336, 339, 349, 354, 356, 358, 359, 360, 363,
    ],
  },
  anal: {
    title: 'Вход через заднюю дверь',
    ids: [
      10, 24, 39, 56, 57, 58, 65, 73, 76, 82, 83, 90, 101, 116, 121, 123, 125, 131, 140, 145, 186, 197, 206, 210,
      220, 236, 239, 246, 250, 254, 255, 258, 264, 277, 280, 284, 293, 297, 317, 318, 323, 334, 337, 345, 363,
    ],
  },
  onTheTable: {
    title: 'Накрываем на стол',
    ids: [5, 14, 23, 58, 61, 75, 79, 87, 101, 104, 126, 131, 190, 246, 250,]
  },
  onTheChair: {
    title: '12 стульев',
    ids: [
      13, 26, 32, 42, 47, 64, 66, 92, 97, 98, 111, 115, 117, 122, 126, 129, 132, 139, 148, 160, 172, 179, 185, 186,
      192, 199, 207, 211, 215, 219, 221, 228, 229, 233, 237, 241, 243, 254, 258, 273, 277, 280, 290, 298, 307, 318, 321,
    ],
  },
  fitBall: {
    title: 'Команда вводит мяч в игру',
    ids: [8, 21, 61, 69, 75, 101, 119, 137, 165, 166, 168, 216, 222, 234, 263, 288, 322, 332, 351, 355, 362,]
  },
  inTheBed: {
    title: 'Любовное ложе',
    ids: [
      1, 3, 6, 7, 9, 10, 15, 16, 17, 18, 25, 28, 29, 30, 31, 33, 34, 35, 36, 38, 39, 40, 41, 43, 44, 46, 48, 49,
      52, 55, 56, 59, 60, 63, 67, 71, 72, 73, 74, 76, 77, 78, 81, 82, 83, 84, 85, 86, 89, 90, 91, 93,
      94, 95, 96, 100, 102, 103, 105, 106, 107, 108, 110, 112, 113, 114, 116, 118, 120, 121, 123, 125, 127,
      130, 133, 134, 135, 136, 138, 140, 141, 142, 143, 144, 145, 146, 147, 151, 152, 153, 154, 155, 156, 158, 159,
      162, 163, 164, 170, 173, 174, 175, 176, 180, 181, 182, 184, 187, 191, 195, 196, 197, 198, 201,
      202, 204, 205, 206, 208, 209, 210, 211, 212, 214, 218, 220, 223, 224, 226, 227, 230, 232, 235, 239, 240,
      242, 243, 244, 245, 249, 251, 252, 253, 255, 256, 259, 261, 262, 265, 266, 268, 269, 270, 275, 276, 279, 281, 282,
      283, 284, 285, 286, 287, 289, 291, 292, 295, 296, 297, 300, 303, 306, 309, 310, 311, 312, 313, 314, 317, 319, 323,
      324, 326, 327, 329, 335, 336, 339, 341, 343, 344, 345, 346, 348, 349, 350, 353, 354, 356, 358, 359, 360, 363, 364,
      365,
    ],
  },
  onThePoof: {
    title: 'Отличный пуфик',
    ids: [
      2, 4, 12, 13, 22, 26, 27, 62, 65, 70, 92, 122, 150, 160, 183, 185, 190, 228, 236, 246, 264, 267, 301, 333, 337,
      347,
    ]
  },
  onTheFloor: {
    title: 'Пол больше чем кровать',
    ids: [
      11, 24, 37, 45, 50, 54, 57, 79, 87, 88, 93, 109, 128, 145, 157, 165, 167, 171, 177, 183, 186, 193, 194, 200, 203,
      225, 233, 250, 253, 272, 280, 293, 304, 316, 321, 330, 334, 361,
    ]
  },
  six9: {
    title: '69',
    ids: [22, 55, 63, 130, 144, 162, 172, 195, 217, 219, 274, 294, 305, 308,]
  },
  headDown: {
    title: 'В омут головой',
    ids: [253,]
  }
}

const pathNumbersCount = 3
const cardsOffset = 4
const cardsCount = 365

export const cardCategories = _.chain(categoriesByOriginIds)
  .mapValues(category => {
    category.ids = category.ids.map(id => id + cardsOffset - 1)
    return category
  })
  .value() as { [key in string]: CategoryType }

export const categoryNames = Object.keys(cardCategories)

export const numberToPath = (n: number): string => `/pages/365_dney_seksa-${_.padStart(`${n}`, pathNumbersCount, '0')}.jpg`
export const createCartNumbers = () => new Array(cardsCount).fill(null).map((__, n) => n + cardsOffset)
export const randomizeCardNumbers: (ns: number[]) => number[] = _.shuffle
export const cardsPage = (ns: number[], count: number, page: number) => _.chain(ns)
  .chunk(count)
  .get(page)
  .value()
